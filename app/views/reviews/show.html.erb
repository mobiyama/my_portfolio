<% provide(:title, @review.title)  %>
<div class="row">
  <div class="col-md-12 rev-card">
    <h1><%= @review.title %></h1>
    <h2><%= @restaurant.name %>の口コミ</h2>
    <p><%= @review.created_at.strftime("%Y年%m月%d日") %></p>
    <p>投稿者:<%= @review.user.username %></p>
    <p><%= safe_join(@review.body.split("\n"), tag(:br)) %></p>
    <% if @review.review_images.present? %>
      <% @review.review_images.each do |image| %>
        <%= attachment_image_tag image, :image, :fill, 200, 200 %>
      <% end %>
    <% end %>
    <br>
    <%= render "reviews/tag_list", tag_list: @review.tag_list %>
  </div>
</div>
<div class="row">
  <%= render "likes/like", review: @review %>
  <% if @review.user == current_user %>
    <%=link_to "編集する",edit_restaurant_review_path, class:"btn btn-success"%>
    <%=link_to "削除する",restaurant_review_path, method: :delete, class:"btn btn-danger", data: {confirm: "本当にこの投稿を削除しますか？" }%>
  <% end %>
</div>
<div class="row">
  <div class="col-sm">
    <h4>コメント</h4>
    <div id="comments_area"><!-- #① -->
      <!-- 投稿されたコメント一覧をレビューの詳細ページに表示するためのrender -->
      <%= render partial: 'comments/index', locals: { comments: @comments } %>
    </div>
    <% if user_signed_in? %>
      <!-- コメント入力欄をレビューの詳細ページに表示するためのrender -->
      <div id="error_area">
        <%= render partial: 'comments/form', locals: { comment: @comment, review: @review } %>
      </div>
    <% end %>
  </div>
</div>
